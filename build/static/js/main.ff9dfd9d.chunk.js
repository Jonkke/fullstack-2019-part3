(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,n){e.exports=n(39)},18:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),u=n(11),c=n.n(u),r=(n(18),n(2)),o=function(e){return i.a.createElement("div",null,i.a.createElement("h2",null,"Lis\xe4\xe4 uusi"),i.a.createElement("form",{onSubmit:e.submitHandler},i.a.createElement("div",null,"nimi: ",i.a.createElement("input",{value:e.nameValue,onChange:e.nameHandler})),i.a.createElement("div",null,"numero: ",i.a.createElement("input",{value:e.numValue,onChange:e.numHandler})),i.a.createElement("div",null,i.a.createElement("button",{type:"submit"},"lis\xe4\xe4"))))},l=function(e){return i.a.createElement("div",null,i.a.createElement("h3",null,"Filtter\xf6i tuloksia"),"Rajaa n\xe4ytett\xe4vi\xe4:",i.a.createElement("input",{type:"text",value:e.text,onChange:e.handler}))},s=function(e){return i.a.createElement("div",null,i.a.createElement("p",null,"Nimi: ",e.name,", Puhelinnumero: ",e.num," ",i.a.createElement("button",{onClick:e.deleteHandler},"poista")))},m=n(3),d=n.n(m),f="/api/persons",h=function(){return d.a.get(f).then(function(e){return e.data})},p=function(e){return d.a.post(f,e).then(function(e){return e.data})},b=function(e){return d.a.delete("".concat(f,"/").concat(e)).then(function(e){return e.data})},v=function(e){return d.a.put("".concat(f,"/").concat(e.id),e).then(function(e){return e.data})},E=function(e){var t={position:"absolute",border:"3px solid",background:e.isBad?"#ffacac":"#adefcf",borderColor:e.isBad?"#ff5555":"#77cc88",borderRadius:"5px",width:"400px",height:"65px",top:"100px",left:"50%",marginLeft:"-200px",textAlign:"center"};return i.a.createElement("div",{style:t},i.a.createElement("p",{style:{fontSize:"20px",fontWeight:"bold"}},e.msg))},g=function(){var e=Object(a.useState)([]),t=Object(r.a)(e,2),n=t[0],u=t[1],c=Object(a.useState)(n),m=Object(r.a)(c,2),d=m[0],f=m[1],g=Object(a.useState)(""),j=Object(r.a)(g,2),k=j[0],O=j[1],w=Object(a.useState)(""),x=Object(r.a)(w,2),B=x[0],H=x[1],y=Object(a.useState)(""),S=Object(r.a)(y,2),C=S[0],L=S[1],P=Object(a.useState)({}),V=Object(r.a)(P,2),J=V[0],N=V[1],R=Object(a.useState)(!1),z=Object(r.a)(R,2),A=z[0],D=z[1];Object(a.useEffect)(function(){F()},[]),Object(a.useEffect)(function(){J.msg&&(D(!0),setTimeout(function(){D(!1)},4e3))},[J]);var F=function(){h().then(function(e){u(e),f(e)}).catch(function(){N({msg:"Henkil\xf6iden haussa tapahtui virhe!",isBad:!0})})},I=function(e){var t=n.filter(function(t){return t.name.toLowerCase().includes(e.trim().toLowerCase())});f(t)};return i.a.createElement("div",null,A?i.a.createElement(E,{msg:J.msg,isBad:J.isBad}):null,i.a.createElement("h2",null,"Puhelinluettelo"),i.a.createElement(l,{text:C,handler:function(e){var t=e.target.value;L(t),I(t)}}),i.a.createElement(o,{submitHandler:function(e){if(e.preventDefault(),n.find(function(e){return e.name===k})){if(!window.confirm("".concat(k," on jo luettelossa, korvataanko vanha numero uudella?")))return;var t=n.find(function(e){return e.name===k}).id;v({name:k,number:B,id:t}).then(function(e){N({msg:"P\xe4ivitettiin henkil\xf6n ".concat(e.name," tiedot.")}),F()}).catch(function(e){404===e.response.status?(N({msg:"Henkil\xf6n tietoja ei l\xf6ydy, ne on luultavasti poistettu.",isBad:!0}),F()):N({msg:"".concat(e.response.data),isBad:!0})})}else p({name:k,number:B}).then(function(e){var t=n.concat(e);u(t),f(t),N({msg:"Lis\xe4ttiin henkil\xf6 ".concat(e.name)})}).catch(function(e){N({msg:"".concat(e.response.data.error),isBad:!0})}),O(""),H(""),L("")},nameValue:k,nameHandler:function(e){O(e.target.value)},numValue:B,numHandler:function(e){H(e.target.value)}}),i.a.createElement("h2",null,"Numerot"),i.a.createElement("div",null,d.map(function(e){return i.a.createElement(s,{key:e.id,name:e.name,num:e.number,deleteHandler:(t=e,function(){window.confirm("Poistetaanko ".concat(t.name,"?"))&&b(t.id).then(function(){F(),N({msg:"Poistettiin henkil\xf6 ".concat(t.name),isBad:!1})}).catch(function(e){console.log(e),404===e.response.status?(N({msg:"Henkil\xf6 oli jo poistettu.",isBad:!0}),F()):N({msg:"Virhe henkil\xf6n poistossa!",isBad:!0})})})});var t})))};c.a.render(i.a.createElement(g,null),document.getElementById("root"))}},[[12,2,1]]]);
//# sourceMappingURL=main.ff9dfd9d.chunk.js.map